<UserControl x:Class="MP2.Mp2Gui"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:local="clr-namespace:MP2"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2006" xmlns:mah="http://metro.mah.com/winfx/xaml/controls" xmlns:mah1="http://metro.mahapps.com/winfx/xaml/controls"
             mc:Ignorable="d" 
             d:DesignHeight="auto" d:DesignWidth="auto">
    <!--this allows you to <bind> DataContext of the grid to your settings.-->
    <!--https://learn.microsoft.com/en-us/dotnet/api/system.windows.frameworkelement.datacontext?view=windowsdesktop-8.0-->
    
    <TabControl DataContext="{x:Static local:Mp2Settings.Instance}"  Background="#B22E4631" BorderBrush="#FF50D63E">
        <TabItem Header="User Verify" HorizontalAlignment="Left" VerticalAlignment="Top" Background="#B22E4631" BorderBrush="#FF50D63E">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Label Grid.Row="0" Grid.Column="0" Content="Expiration Time:" />
                <Label Grid.Row="0" Grid.Column="1" Content="{Binding DaysLeft}" />
                <Label Grid.Row="1" Grid.Column="0" Content="User Key: " />
                <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding Path=UserKey, Mode=TwoWay}" MinWidth="100" MaxWidth="200" ToolTip=""/>
            </Grid>
        </TabItem>
        <TabItem Header="Mapper Bot" HorizontalAlignment="Left" VerticalAlignment="Top" Background="#B22E4631" BorderBrush="#FF50D63E">
            <TabControl>
                <TabControl.Resources>
                    <Style x:Key="DataGridCheckBoxStyle" TargetType="{x:Type CheckBox}">
                        <Setter Property="HorizontalAlignment" Value="Center" />
                    </Style>
                </TabControl.Resources>
                <TabItem BorderThickness="1" Header="Stashing">
                    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                        <StackPanel Margin="0,5,0,0"
          HorizontalAlignment="Left"
          VerticalAlignment="Top"
          Orientation="Vertical">
                            <StackPanel Grid.IsSharedSizeScope="true" Orientation="Vertical">
                                <ItemsControl ItemsSource="{Binding GeneralStashingRules}" BorderBrush="#FF50D63E" Background="#B22E4631">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Grid>

                                                <Grid.Resources>
                                                    <Style TargetType="{x:Type Label}" >
                                                        <Setter Property="Foreground" Value="{x:Static local:RarityColors.Normal}" />
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding Name}" 
                                               Value="{x:Static local:StashingCategory.Rare}">
                                                                <Setter Property="Foreground" Value="{x:Static local:RarityColors.Rare}" />
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding Name}" 
                                               Value="{x:Static local:StashingCategory.Unique}">
                                                                <Setter Property="Foreground" Value="{x:Static local:RarityColors.Unique}" />
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding Name}" 
                                               Value="{x:Static local:StashingCategory.Gem}">
                                                                <Setter Property="Foreground" Value="{x:Static local:RarityColors.Gem}" />
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding Name}" 
                                               Value="{x:Static local:StashingCategory.Essence}">
                                                                <Setter Property="Foreground" Value="{x:Static local:RarityColors.Currency}" />
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding Name}" 
                                               Value="{x:Static local:StashingCategory.Currency}">
                                                                <Setter Property="Foreground" Value="{x:Static local:RarityColors.Currency}" />
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding Name}" 
                                                Value="{x:Static local:StashingCategory.Tablets}">
                                                                <Setter Property="Foreground" Value="{x:Static local:RarityColors.Currency}" />
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Grid.Resources>

                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>

                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" SharedSizeGroup="Column1" />
                                                    <ColumnDefinition Width="Auto" SharedSizeGroup="Column2" />
                                                </Grid.ColumnDefinitions>

                                                <Label Grid.Row="0"
                             Grid.Column="0"
                             Margin="0,3,0,0"
                             HorizontalAlignment="Left"
                             VerticalAlignment="Top"
                             Content="{Binding Name}" />

                                                <TextBox Grid.Row="0"
                               Grid.Column="1"
                               Margin="5,3,0,0"
                               HorizontalAlignment="Left"
                               VerticalAlignment="Top"
                               Text="{Binding Tabs, Mode=TwoWay}" />
                                            </Grid>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </StackPanel>
                    </ScrollViewer>
                </TabItem>
                <TabItem BorderThickness="1" Header="Mapper Bot">
                    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="192.5" />
                                <ColumnDefinition Width="173.607"/>
                                <ColumnDefinition Width="Auto" MinWidth="0" />
                            </Grid.ColumnDefinitions>
                            <GroupBox Grid.Row="0" Grid.Column="0" Header="Global" Margin="0,0,6,245">
                                <StackPanel Orientation="Vertical">
                                    <Grid Margin="0,5,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" Text="Max map tier" />

                                        <mah1:NumericUpDown Grid.Row="0" Grid.Column="1" Margin="5,0,0,0" IsTabStop="False" Maximum="16" Minimum="1" Value="{Binding MaxMapTier}" />

                                        <TextBlock Grid.Row="1"
                                     Grid.Column="0"
                                     Margin="0,5,0,0"
                                     VerticalAlignment="Center"
                                     Text="Exploration percent" />

                                        <mah1:NumericUpDown Grid.Row="1"
                                                 Grid.Column="1"
                                                 Margin="5,5,0,0"
                                                 IsTabStop="False"
                                                 Maximum="100"
                                                 Minimum="0"
                                                 Value="{Binding ExplorationPercent}" />
                                    </Grid>

                                    <CheckBox Margin="0,10,0,0"
                                Content="Loot all visible items"
                                IsChecked="{Binding LootVisibleItems}" />

                                    <CheckBox Margin="0,10,0,0"
                                Content="Monster tracking"
                                IsChecked="{Binding TrackMob}" />

                                    <CheckBox Margin="0,5,0,0"
                                Content="Fast transition"
                                IsChecked="{Binding FastTransition}" />

                                    <CheckBox Margin="0,5,0,0"
                                Content="Strict monster remaining"
                                IsChecked="{Binding StrictMobRemaining}" />

                                    <CheckBox Margin="0,5,0,0"
                                Content="Strict exploration percent"
                                IsChecked="{Binding StrictExplorationPercent}" />
                                </StackPanel>
                            </GroupBox>

                            <GroupBox
                        Grid.Column="0"
                        Header="Misc" Margin="8,240,8,90">

                                <StackPanel Orientation="Vertical">

                                    <CheckBox Margin="0,5,0,0"
                                Content="Use hideout"
                                IsChecked="{Binding UseHideout}" />

                                    <CheckBox Margin="0,5,0,0"
                                Content="Run unid maps"
                                IsChecked="{Binding RunUnId}" />

                                    <CheckBox Margin="0,5,0,0"
                                Content="Only run vaal maps"
                                IsChecked="{Binding OnlyRunCorrupted}" />

                                    <CheckBox Margin="0,5,0,0"
                                Content="Stop after current map"
                                IsChecked="{Binding StopRequested}" />
                                </StackPanel>
                            </GroupBox>

                            <GroupBox
                        Header="Atlas" Margin="189,0,-8,101" Grid.ColumnSpan="3">

                                <StackPanel Orientation="Vertical">
                                    <CheckBox x:Name="AtlasExploreCheckbox"
                                Margin="0,10,0,0"
                                Content="Atlas exploration mode"
                                IsChecked="{Binding AtlasExplorationEnabled}" />
                                    <CheckBox x:Name="EnableBreach" Margin="0,8,0,0" Content="Enable Breach" IsChecked="{Binding Enablebreachs}" />
                                    <CheckBox x:Name="OnlyRunThatMap" Margin="0,10,0,0" Content="Only open Bluff Tower" IsChecked="{Binding OpenOnlyThatMap}" />
                                    <Label Content="-------------------------" MaxWidth="145"/>
                                    <CheckBox x:Name="CitadelFarm" Content="Citadel Farming" Margin="0,4,0,0" IsChecked="{Binding CitadelFinder}" />
                                    <Label Content="-------------------------" MaxWidth="145"/>
                                    <CheckBox x:Name="Simulacrum" Content="Simulacrum Bot" Margin="0,4,0,0" IsChecked="{Binding SimulacrumBot}" />
                                    <Label Content="-------------------------" MaxWidth="145"/>
                                    <CheckBox x:Name="Breachr" Content="Breach Runner" Margin="0,4,0,0" IsChecked="{Binding BreachRunner}" />
                                    <CheckBox x:Name="sTower" Content="Setup Towers" Margin="0,4,0,0" IsChecked="{Binding SetupBreachTower}" />
                                    <CheckBox x:Name="rBreachstone" Content="Run BreachStone" Margin="0,4,0,0" IsChecked="{Binding RunBreachStone}" />
                                </StackPanel>
                            </GroupBox>
                        </Grid>
                    </ScrollViewer>
                </TabItem>
                <TabItem Header="Flasks" BorderThickness="1" HorizontalAlignment="Left" VerticalAlignment="Top">
                    <DataGrid CanUserSortColumns="False" ItemsSource="{Binding Flasks}" AutoGenerateColumns="False" AllowDrop="False" CanUserAddRows="False" VerticalAlignment="Top" Margin="0,5,0,0">
                        <DataGrid.Columns>
                            <DataGridTemplateColumn Header="Enabled">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <CheckBox HorizontalAlignment="Center" IsChecked="{Binding Enabled, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" ToolTip="Enabled ?" Width="Auto"/>
                                        </Grid>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <!--<DataGridCheckBoxColumn Header="Enabled" Binding="{Binding Path=Enabled}" Width="Auto"></DataGridCheckBoxColumn>-->
                            <DataGridTemplateColumn Header="Slot" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Label Content="{Binding Slot, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="UseEs">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <CheckBox HorizontalAlignment="Center" IsChecked="{Binding UseEs, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" ToolTip="Use energy shield as threshold instead of life" Width="Auto"/>
                                        </Grid>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <!--<DataGridCheckBoxColumn Header="UseEs" Binding="{Binding Path=UseEs}" Width="Auto"></DataGridCheckBoxColumn>-->
                            <DataGridTemplateColumn Header="UseMana">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <CheckBox HorizontalAlignment="Center" IsChecked="{Binding UseMana, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" ToolTip="Use mana as threshold instead of life" Width="Auto"/>
                                        </Grid>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <!--<DataGridCheckBoxColumn Header="UseMana" Binding="{Binding Path=UseMana}" Width="Auto"></DataGridCheckBoxColumn>-->
                            <DataGridTemplateColumn Header="Threshold" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <WrapPanel>
                                            <Slider x:Name="SlThreshold" Minimum="0" Margin="0,5,0,0" Width="160" Value="{Binding Threshold, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" TickFrequency="1" IsSnapToTickEnabled="True" SmallChange="1" LargeChange="1" Maximum="101" AutoToolTipPrecision="1" VerticalAlignment="Center" ToolTip="This flask will be triggered when the selected property (Life, Es, Mana) is under this percent. set to 101 to always trigger."/>
                                            <TextBox x:Name="TbThreshold" Text="{Binding Value, ElementName=SlThreshold}" Width="40"  HorizontalAlignment="Left"  Margin="0,5,0,0" VerticalAlignment="Center"/>
                                        </WrapPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="IgnoreEffect">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <CheckBox HorizontalAlignment="Center" IsChecked="{Binding IgnoreEffect, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" ToolTip="Ignore the Effect duration when deciding if to use this flask, use it in conjunction with Cooldown to trigger this flask each x ms." Width="Auto"/>
                                        </Grid>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="Cooldown (Ms)" >
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <WrapPanel>
                                            <Slider x:Name="SlCooldown" Minimum="0" Margin="0,5,0,0" Width="160" Value="{Binding Cooldown, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" TickFrequency="1" IsSnapToTickEnabled="True" SmallChange="1" LargeChange="1" Maximum="15000" AutoToolTipPrecision="1" VerticalAlignment="Center" ToolTip="Cooldown time for this flask. The flask will be used once every x milliseconds as per delay configuration, Pls note, if the option IgnoreEffect is not selected, the flask will newer be used till the flask effect wear off, regardless for the Cooldown configuration.."/>
                                            <TextBox x:Name="TbCooldown" Text="{Binding Value, ElementName=SlCooldown}" MinWidth="40"  HorizontalAlignment="Left"  Margin="0,5,0,0" VerticalAlignment="Center"/>
                                        </WrapPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </TabItem>
                <TabItem BorderThickness="1"
           Header="Upgrading">
                    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <GroupBox Grid.Row="0"
                        Grid.Column="0"
                        Header="Magic">

                                <Grid Margin="0,5,0,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <CheckBox Grid.Row="0"
                                Grid.Column="0"
                                Content="Tier"
                                IsChecked="{Binding MagicUpgrade.TierEnabled}"
                                ToolTip="Minimum tier to start using Transmutation Orbs on maps" />

                                    <mah1:NumericUpDown Grid.Row="0"
                                             Grid.Column="1"
                                             Margin="5,0,0,0"
                                             IsEnabled="{Binding MagicUpgrade.TierEnabled}"
                                             Maximum="16"
                                             Minimum="1"
                                             Value="{Binding MagicUpgrade.Tier}" />

                                    <CheckBox Grid.Row="1"
                                Grid.Column="0"
                                Content="Priority"
                                IsChecked="{Binding MagicUpgrade.PriorityEnabled}"
                                ToolTip="Minimum priority to start using Transmutation orbs on maps" />

                                    <mah1:NumericUpDown Grid.Row="1"
                                             Grid.Column="1"
                                             Margin="5,0,0,0"
                                             IsEnabled="{Binding MagicUpgrade.PriorityEnabled}"
                                             Value="{Binding MagicUpgrade.Priority}" />
                                </Grid>
                            </GroupBox>

                            <GroupBox Grid.Row="0"
                        Grid.Column="1"
                        Header="Rare">

                                <Grid Margin="0,5,0,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <CheckBox Grid.Row="0"
                                Grid.Column="0"
                                Content="Tier"
                                IsChecked="{Binding RareUpgrade.TierEnabled}"
                                ToolTip="Minimum tier to start using Alchemy Orbs on maps" />

                                    <mah1:NumericUpDown Grid.Row="0"
                                             Grid.Column="1"
                                             Margin="5,0,0,0"
                                             IsEnabled="{Binding RareUpgrade.TierEnabled}"
                                             Maximum="16"
                                             Minimum="1"
                                             Value="{Binding RareUpgrade.Tier}" />

                                    <CheckBox Grid.Row="1"
                                Grid.Column="0"
                                Content="Priority"
                                IsChecked="{Binding RareUpgrade.PriorityEnabled}"
                                ToolTip="Minimum priority to start using Alchemy Orbs on maps" />

                                    <mah1:NumericUpDown Grid.Row="1"
                                             Grid.Column="1"
                                             Margin="5,0,0,0"
                                             IsEnabled="{Binding RareUpgrade.PriorityEnabled}"
                                             Value="{Binding RareUpgrade.Priority}" />
                                </Grid>
                            </GroupBox>

                            <GroupBox Grid.Row="1"
                        Grid.Column="0"
                        Header="Magic to Rare">
                                <Grid Margin="0,5,0,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <CheckBox Grid.Row="0"
Grid.Column="0"
Content="Tier"
IsChecked="{Binding MagicRareUpgrade.TierEnabled}"
ToolTip="Minimum tier to start using Scouring+Alchemy orbs on magic maps" />

                                    <mah1:NumericUpDown Grid.Row="0"
             Grid.Column="1"
             Margin="5,0,0,0"
             IsEnabled="{Binding MagicRareUpgrade.TierEnabled}"
             Maximum="16"
             Minimum="1"
             Value="{Binding MagicRareUpgrade.Tier}" />

                                    <CheckBox Grid.Row="1"
Grid.Column="0"
Content="Priority"
IsChecked="{Binding MagicRareUpgrade.PriorityEnabled}"
ToolTip="Minimum priority to start using Scouring+Alchemy orbs on magic maps" />

                                    <mah1:NumericUpDown Grid.Row="1"
             Grid.Column="1"
             Margin="5,0,0,0"
             IsEnabled="{Binding MagicRareUpgrade.PriorityEnabled}"
             Value="{Binding MagicRareUpgrade.Priority}" />
                                </Grid>
                            </GroupBox>

                            <GroupBox Grid.Row="1"
                        Grid.Column="1"
                        Header="Vaal">

                                <Grid Margin="0,5,0,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <CheckBox Grid.Row="0"
                                Grid.Column="0"
                                Content="Tier"
                                IsChecked="{Binding VaalUpgrade.TierEnabled}"
                                ToolTip="Minimum tier to start using Vaal Orbs on maps" />

                                    <mah1:NumericUpDown Grid.Row="0"
                                             Grid.Column="1"
                                             Margin="5,0,0,0"
                                             IsEnabled="{Binding VaalUpgrade.TierEnabled}"
                                             Maximum="16"
                                             Minimum="1"
                                             Value="{Binding VaalUpgrade.Tier}" />

                                    <CheckBox Grid.Row="1"
                                Grid.Column="0"
                                Content="Priority"
                                IsChecked="{Binding VaalUpgrade.PriorityEnabled}"
                                ToolTip="Minimum priority to start using Vaal Orbs on maps" />

                                    <mah1:NumericUpDown Grid.Row="1"
                                             Grid.Column="1"
                                             Margin="5,0,0,0"
                                             IsEnabled="{Binding VaalUpgrade.PriorityEnabled}"
                                             Value="{Binding VaalUpgrade.Priority}" />
                                </Grid>
                            </GroupBox>

                            <GroupBox Grid.Row="3"
                        Grid.Column="0"
                        Grid.ColumnSpan="2"
                        Header="Existing rare maps">

                                <StackPanel Orientation="Vertical">

                                    <RadioButton Margin="0,5,0,0"
                                   Content="Run"
                                   GroupName="g2"
                                   IsChecked="{Binding ExistingRares, ConverterParameter={x:Static local:ExistingRares.Run}, Converter={x:Static local:EnumToBoolConverter.Instance}}" />

                                    <RadioButton Margin="0,5,0,0"
                                   Content="Do not run"
                                   GroupName="g2"
                                   IsChecked="{Binding ExistingRares, ConverterParameter={x:Static local:ExistingRares.NoRun}, Converter={x:Static local:EnumToBoolConverter.Instance}}" />

                                    <RadioButton Margin="0,5,0,0"
                                   Content="Do not run if reroll is required"
                                   GroupName="g2"
                                   IsChecked="{Binding ExistingRares, ConverterParameter={x:Static local:ExistingRares.NoReroll}, Converter={x:Static local:EnumToBoolConverter.Instance}}" />

                                    <RadioButton Margin="0,5,0,0"
                                   Content="Downgrade to magic if reroll is required"
                                   GroupName="g2"
                                   IsChecked="{Binding ExistingRares, ConverterParameter={x:Static local:ExistingRares.Downgrade}, Converter={x:Static local:EnumToBoolConverter.Instance}}" />

                                </StackPanel>
                            </GroupBox>

                            <GroupBox Grid.Row="4"
                        Grid.Column="0"
                        Grid.ColumnSpan="2"
                        Header="Rare reroll">

                                <StackPanel Orientation="Vertical">

                                    <RadioButton Margin="0,5,0,0"
                                   Content="Chaos"
                                   GroupName="g1"
                                   IsChecked="{Binding RerollMethod, ConverterParameter={x:Static local:RareReroll.Chaos}, Converter={x:Static local:EnumToBoolConverter.Instance}}" />
                                </StackPanel>
                            </GroupBox>
                        </Grid>
                    </ScrollViewer>
                </TabItem>
                <TabItem BorderThickness="1" Header="Chests">
                    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">

                        <StackPanel Margin="5,5,0,0"
          HorizontalAlignment="Left"
          VerticalAlignment="Top"
          Orientation="Vertical">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Row="0"
                 Grid.Column="0"
                 Margin="0,5,0,0"
                 VerticalAlignment="Center"
                 Text="Chest open range" />

                                <mah1:NumericUpDown Grid.Row="0"
                             Grid.Column="1"
                             Margin="5,5,0,0"
                             IsTabStop="False"
                             Maximum="200"
                             Minimum="-1"
                             Value="{Binding ChestOpenRange}" />

                            </Grid>
                            <StackPanel Margin="0,15,0,0" Orientation="Horizontal">
                                <Expander Header="Chests">
                                    <ItemsControl ItemsSource="{Binding Chests}">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel>
                                                    <CheckBox Margin="0,5,0,0"
                                    Content="{Binding Name}"
                                    IsChecked="{Binding Enabled}" />
                                                </StackPanel>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </Expander>
                            </StackPanel>
                        </StackPanel>
                    </ScrollViewer>
                </TabItem>
                <TabItem BorderThickness="1"
           Header="Affixes">
                    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Row="0" Orientation="Vertical">

                                <TextBlock Text="Search:" />

                                <TextBox x:Name="AffixSearchTextBox"
                           Width="300"
                           HorizontalAlignment="Left"
                           mah1:TextBoxHelper.ClearTextButton="True"
                           TextChanged="AffixSearchTextBox_TextChanged" />
                            </StackPanel>

                            <DataGrid x:Name="AffixGrid"
                        Grid.Row="1"
                        Margin="0,10,0,0"
                        AutoGenerateColumns="False"
                        BorderThickness="1"
                        CanUserAddRows="False"
                        CanUserDeleteRows="False"
                        GridLinesVisibility="All"
                        ItemsSource="{Binding AffixList}"
                        SelectionChanged="DataGridUnselectAll">

                                <DataGrid.Columns>

                                    <DataGridTextColumn Binding="{Binding Name, Mode=OneTime}"
                                          Header="Name"
                                          IsReadOnly="True" />

                                    <DataGridTextColumn Binding="{Binding Description, Mode=OneTime}"
                                          Header="Description"
                                          IsReadOnly="True" />

                                    <DataGridCheckBoxColumn Binding="{Binding RerollMagic, UpdateSourceTrigger=PropertyChanged}"
                                              ElementStyle="{StaticResource DataGridCheckBoxStyle}"
                                              Header="Reroll on magic" />

                                    <DataGridCheckBoxColumn Binding="{Binding RerollRare, UpdateSourceTrigger=PropertyChanged}"
                                              ElementStyle="{StaticResource DataGridCheckBoxStyle}"
                                              Header="Reroll on rare" />
                                </DataGrid.Columns>
                            </DataGrid>
                        </Grid>
                    </ScrollViewer>
                </TabItem>
                <TabItem BorderThickness="1" Header="Stuck detection">
                    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                        <Grid Margin="0,5,0,0"
    HorizontalAlignment="Left"
    VerticalAlignment="Top">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <CheckBox x:Name="SdEnabledCheckbox"
            Grid.Row="0"
            Grid.Column="0"
            Content="Enabled"
            IsChecked="{Binding StuckDetectionEnabled}" />

                            <Label Grid.Row="1"
         Grid.Column="0"
         Margin="0,10,0,0"
         VerticalAlignment="Center"
         Content="Max stucks per instance"
         IsEnabled="{Binding IsChecked, ElementName=SdEnabledCheckbox}" />

                            <mah1:NumericUpDown Grid.Row="1"
                         Grid.Column="1"
                         Margin="5,10,0,0"
                         IsEnabled="{Binding IsChecked, ElementName=SdEnabledCheckbox}"
                         Minimum="1"
                         Value="{Binding MaxStucksPerInstance}" />

                            <Label Grid.Row="2"
         Grid.Column="0"
         Margin="0,5,0,0"
         VerticalAlignment="Center"
         Content="Max stuck count small range"
         IsEnabled="{Binding IsChecked, ElementName=SdEnabledCheckbox}" />

                            <mah1:NumericUpDown Grid.Row="2"
                         Grid.Column="1"
                         Margin="5,5,0,0"
                         IsEnabled="{Binding IsChecked, ElementName=SdEnabledCheckbox}"
                         Minimum="1"
                         Value="{Binding MaxStuckCountSmall}" />

                            <Label Grid.Row="3"
         Grid.Column="0"
         Margin="0,5,0,0"
         VerticalAlignment="Center"
         Content="Max stuck count medium range"
         IsEnabled="{Binding IsChecked, ElementName=SdEnabledCheckbox}" />

                            <mah1:NumericUpDown Grid.Row="3"
                         Grid.Column="1"
                         Margin="5,5,0,0"
                         IsEnabled="{Binding IsChecked, ElementName=SdEnabledCheckbox}"
                         Minimum="1"
                         Value="{Binding MaxStuckCountMedium}" />

                            <Label Grid.Row="4"
         Grid.Column="0"
         Margin="0,5,0,0"
         VerticalAlignment="Center"
         Content="Max stuck count long range"
         IsEnabled="{Binding IsChecked, ElementName=SdEnabledCheckbox}" />

                            <mah1:NumericUpDown Grid.Row="4"
                         Grid.Column="1"
                         Margin="5,5,0,0"
                         IsEnabled="{Binding IsChecked, ElementName=SdEnabledCheckbox}"
                         Minimum="1"
                         Value="{Binding MaxStuckCountLong}" />
                        </Grid>
                    </ScrollViewer>
                </TabItem>
            </TabControl>
        </TabItem>
        <TabItem Header="Overlay" HorizontalAlignment="Left" VerticalAlignment="Top" Background="#B22E4631" BorderBrush="#FF50D63E">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <Label Grid.Row="0" Grid.Column="0" Content="Enable Overlay: " Margin="3,5,3,1"/>
                <CheckBox Grid.Row="0" Grid.Column="1" Margin="3" IsChecked="{Binding EnableOverlay, Mode=TwoWay}" ToolTipService.ToolTip="Enable and disable the Overlay drawing."/>

                <Label Grid.Row="1" Grid.Column="0" Content="DrawInBackground: " Margin="3,5,3,1"/>
                <CheckBox Grid.Row="1" Grid.Column="1" Margin="3" IsChecked="{Binding DrawInBackground, Mode=TwoWay}" ToolTipService.ToolTip="If enabled, the Overlay is draw even when the game is not the top most foreground window."/>

                <Label Grid.Row="2" Grid.Column="0" Content="Draw Mobs: " Margin="3,5,3,1"/>
                <CheckBox Grid.Row="2" Grid.Column="1" Margin="3" IsChecked="{Binding DrawMobs, Mode=TwoWay}" ToolTipService.ToolTip="Draw the mobs around you."/>

                <Label Grid.Row="3" Grid.Column="0" Content="Draw Corpses: " Margin="3,5,3,1"/>
                <CheckBox Grid.Row="3" Grid.Column="1" Margin="3" IsChecked="{Binding DrawCorpses, Mode=TwoWay}" ToolTipService.ToolTip="Draw the Corpses around you."/>

                <Label Content="Overlay Fps: " Grid.Row="4" Grid.Column="0" Margin="3,5,3,1"/>
                <WrapPanel Grid.Row="4" Grid.Column="1" Margin="3">
                    <Slider x:Name="SlFPS" Minimum="0" Margin="0,5,0,0" Width="160" Value="{Binding FPS, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" TickFrequency="1" IsSnapToTickEnabled="True" SmallChange="1" LargeChange="1" Maximum="100" AutoToolTipPrecision="1" VerticalAlignment="Center" ToolTip="Change the Overlay draw frequency, higher number, higher fps and higher resource consumption."/>
                    <TextBox x:Name="TbFPS" Text="{Binding Value, ElementName=SlFPS}" MinWidth="40"  HorizontalAlignment="Left"  Margin="0,5,0,0" VerticalAlignment="Center"/>
                </WrapPanel>

                <Label Content="Overlay X Position: " Grid.Row="5" Grid.Column="0" Margin="3,5,3,1"/>
                <WrapPanel Grid.Row="5" Grid.Column="1" Margin="3">
                    <Slider x:Name="SlXPos" Minimum="0" Margin="0,5,0,0" Width="160" Value="{Binding OverlayXCoord, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" TickFrequency="1" IsSnapToTickEnabled="True" SmallChange="1" LargeChange="1" Maximum="5000" AutoToolTipPrecision="1" VerticalAlignment="Center" ToolTip="Change the Overlay draw X position."/>
                    <TextBox x:Name="TbXPos" Text="{Binding Value, ElementName=SlXPos}" MinWidth="40"  HorizontalAlignment="Left"  Margin="0,5,0,0" VerticalAlignment="Center"/>
                </WrapPanel>

                <Label Content="Overlay Y Position: " Grid.Row="6" Grid.Column="0" Margin="3,5,3,1"/>
                <WrapPanel Grid.Row="6" Grid.Column="1" Margin="3">
                    <Slider x:Name="SlYPos" Minimum="0" Margin="0,5,0,0" Width="160" Value="{Binding OverlayYCoord, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" TickFrequency="1" IsSnapToTickEnabled="True" SmallChange="1" LargeChange="1" Maximum="5000" AutoToolTipPrecision="1" VerticalAlignment="Center" ToolTip="Change the Overlay draw Y position."/>
                    <TextBox x:Name="TbYPos" Text="{Binding Value, ElementName=SlYPos}" MinWidth="40"  HorizontalAlignment="Left"  Margin="0,5,0,0" VerticalAlignment="Center"/>
                </WrapPanel>

                <Label Content="Overlay Transparency: " Grid.Row="7" Grid.Column="0" Margin="3,5,3,1"/>
                <WrapPanel Grid.Row="7" Grid.Column="1" Margin="3">
                    <Slider x:Name="SlTransparency" Minimum="0" Margin="0,5,0,0" Width="160" Value="{Binding OverlayTransparency, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" TickFrequency="1" IsSnapToTickEnabled="True" SmallChange="1" LargeChange="1" Maximum="255" AutoToolTipPrecision="1" VerticalAlignment="Center" ToolTip="Change the Overlay background transparency."/>
                    <TextBox x:Name="TbTransparency" Text="{Binding Value, ElementName=SlTransparency}" MinWidth="40"  HorizontalAlignment="Left"  Margin="0,5,0,0" VerticalAlignment="Center"/>
                </WrapPanel>
            </Grid>
        </TabItem>
    </TabControl>
</UserControl>
